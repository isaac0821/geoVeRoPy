<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>vrpSolver.plot &#8212; vrpSolver 0.0.56 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b849a4e9" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxdoc.css?v=87629129" />
    <script src="../../_static/documentation_options.js?v=8f83b1af"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">vrpSolver 0.0.56 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">vrpSolver.plot</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for vrpSolver.plot</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">rcParams</span>
<span class="c1"># rcParams[&#39;font.family&#39;] = &#39;SimSun&#39;</span>
<span class="kn">from</span> <span class="nn">matplotlib.animation</span> <span class="kn">import</span> <span class="n">FuncAnimation</span>
<span class="kn">from</span> <span class="nn">matplotlib.animation</span> <span class="kn">import</span> <span class="n">PillowWriter</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">cm</span>

<span class="kn">from</span> <span class="nn">.common</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">.color</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">.msg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">.province</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">.geometry</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># History =====================================================================</span>
<span class="c1"># 20230518 - `plotNodes()` now will plot the neighborhood of nodes</span>
<span class="c1"># 20230624 - Rename functions `plotArcs()`, `plotLocSeq()`, `plotNodeSeq()`</span>
<span class="c1"># 20231022 - Refine `aniRouting()`</span>
<span class="c1"># =============================================================================</span>

<div class="viewcode-block" id="plotLocs">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotLocs">[docs]</a>
<span class="k">def</span> <span class="nf">plotLocs</span><span class="p">(</span>
    <span class="n">locs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">pt</span><span class="p">],</span>
    <span class="n">locColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">locMarker</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span>
    <span class="n">locMarkerSize</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plot locations on a figure</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    locs: list of pt, required</span>
<span class="sd">        A list of locations to be plotted</span>
<span class="sd">    locColor: str, optional, default as &#39;Random&#39;</span>
<span class="sd">        The color of locations to be plotted, &#39;Random&#39; if the color is randomized.</span>
<span class="sd">    locMarker: str, optional, default as &#39;o&#39;</span>
<span class="sd">        The shape of the marker</span>
<span class="sd">    locMarkerSize: str, optional, default as 1</span>
<span class="sd">        The size of the marker</span>
<span class="sd">    xyReverseFlag: bool, optional, default as False</span>
<span class="sd">        Reverse the x, y, (x, y) =&gt; (y, x). Used in plotting (lat, lon) coordinates.</span>
<span class="sd">    fig: matplotlib object, optional, default as None</span>
<span class="sd">        If fig and ax are provided, </span>


<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Check for required fields ===============================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">locs</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="s2">&quot;ERROR: Missing required field `locs`.&quot;</span><span class="p">)</span>

    <span class="c1"># If no based matplotlib figure provided, define boundary =================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">findBoundingBox</span><span class="p">(</span>
            <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">boundingBox</span><span class="p">,</span> 
            <span class="n">pts</span> <span class="o">=</span> <span class="n">locs</span><span class="p">)</span>
        <span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span> <span class="o">=</span> <span class="n">boundingBox</span>
        <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">=</span> <span class="n">findFigSize</span><span class="p">(</span><span class="n">boundingBox</span><span class="p">,</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span>

    <span class="c1"># Draw locs ==============================================================</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">locs</span><span class="p">:</span>
        <span class="c1"># Define color --------------------------------------------------------</span>
        <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">locColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">locColor</span>

        <span class="c1"># plot nodes ----------------------------------------------------------</span>
        <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">locMarkerSize</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="n">locMarker</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="n">locMarker</span><span class="p">,</span> <span class="n">markersize</span> <span class="o">=</span> <span class="n">locMarkerSize</span><span class="p">)</span>

    <span class="c1"># Axis on and off =========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showAxis</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="c1"># Save figure =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">saveFigPath</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">saveFigPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showFig</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotLocs3D">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotLocs3D">[docs]</a>
<span class="k">def</span> <span class="nf">plotLocs3D</span><span class="p">(</span>
    <span class="n">locs3D</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">pt3D</span><span class="p">],</span>
    <span class="n">locColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">locMarker</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span>
    <span class="n">locMarkerSize</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox3D</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>

    <span class="c1"># Check for required fields ===============================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">locs3D</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="s2">&quot;ERROR: Missing required field `locs3D`.&quot;</span><span class="p">)</span>

    <span class="c1"># If no based matplotlib figure provided, define boundary =================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span> <span class="o">=</span> <span class="s1">&#39;3d&#39;</span><span class="p">)</span>
        <span class="n">boundingBox3D</span> <span class="o">=</span> <span class="n">findBoundingBox3D</span><span class="p">(</span>
            <span class="n">boundingBox3D</span> <span class="o">=</span> <span class="n">boundingBox3D</span><span class="p">,</span> 
            <span class="n">pts3D</span> <span class="o">=</span> <span class="n">locs3D</span><span class="p">)</span>
        <span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">,</span> <span class="n">zMin</span><span class="p">,</span> <span class="n">zMax</span><span class="p">)</span> <span class="o">=</span> <span class="n">boundingBox3D</span>
        <span class="c1"># (width, height) = findFigSize(boundingBox3D, figSize[0], figSize[1])</span>
        <span class="c1"># fig.set_figwidth(width)</span>
        <span class="c1"># fig.set_figheight(height)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_zlim</span><span class="p">(</span><span class="n">zMin</span><span class="p">,</span> <span class="n">zMax</span><span class="p">)</span>

    <span class="c1"># Draw locs ==============================================================</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">locs3D</span><span class="p">:</span>
        <span class="c1"># Define color --------------------------------------------------------</span>
        <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">locColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">locColor</span>

        <span class="c1"># plot nodes ----------------------------------------------------------        </span>
        <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">locMarkerSize</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">scatter3D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="n">locMarker</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">scatter3D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="n">locMarker</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="n">locMarkerSize</span><span class="p">)</span>

    <span class="c1"># Axis on and off =========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showAxis</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="c1"># Save figure =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">saveFigPath</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">saveFigPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showFig</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotNodes">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotNodes">[docs]</a>
<span class="k">def</span> <span class="nf">plotNodes</span><span class="p">(</span>
    <span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> 
    <span class="n">locFieldName</span> <span class="o">=</span> <span class="s1">&#39;loc&#39;</span><span class="p">,</span>
    <span class="n">nodeColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">nodeMarker</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span>
    <span class="n">nodeMarkerSize</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Draw nodes</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    nodes: dictionary, required</span>
<span class="sd">        A `nodes` dictionary. See :ref:`nodes` for reference.</span>
<span class="sd">    locFieldName: str, optional, default as &#39;loc&#39;</span>
<span class="sd">        The key value in `nodes` indicating the location of each node.</span>
<span class="sd">    nodeColor: str, optional, default &#39;Random&#39;</span>
<span class="sd">        Alternative option. If &#39;color&#39; is provided in `nodes`, this field will be ignored.</span>
<span class="sd">    nodeMarker: str, optional, default &#39;o&#39;</span>
<span class="sd">        Alternative option for node marker. If &#39;marker&#39; is provided in `nodes`, this field will be ignored.</span>
<span class="sd">    nodeMarker: str, optional, default &#39;o&#39;</span>
<span class="sd">        Alternative option for node marker size. If &#39;markerSize&#39; is provided in `nodes`, this field will be ignored.</span>
<span class="sd">    xyReverseFlag: bool, optional, default False</span>
<span class="sd">        True if need to reverse the x, y coordinates, e.g., plot for (lat, lon)</span>
<span class="sd">    fig: matplotlib object, optional, defaut None</span>
<span class="sd">        `fig` and `ax` indicates the matplotlib object to plot on, if not provided, plot in a new figure</span>
<span class="sd">    ax: matplotlib object, optional, default None</span>
<span class="sd">        See `fig`</span>
<span class="sd">    figSize: 2-tuple, optional, default as (None, 5)</span>
<span class="sd">        Size of the figure in (width, height). If width or height is set to be None, it will be auto-adjusted.</span>
<span class="sd">    boundingBox: 4-tuple, optional, default as (None, None, None, None)</span>
<span class="sd">        (xMin, xMax, yMin, yMax), defines four boundaries of the figure</span>
<span class="sd">    saveFigPath: string, optional, default as None</span>
<span class="sd">        The path for exporting image if provided</span>
<span class="sd">    showFig: bool, optional, default as True</span>
<span class="sd">        True if show the figure in Juypter Notebook environment</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    fig, ax</span>
<span class="sd">        matplotlib.pyplot object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Check for required fields ===============================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nodes</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="n">ERROR_MISSING_NODES</span><span class="p">)</span>

    <span class="c1"># If no based matplotlib figure provided, define boundary =================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">findBoundingBox</span><span class="p">(</span>
            <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">boundingBox</span><span class="p">,</span> 
            <span class="n">nodes</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">,</span> 
            <span class="n">locFieldName</span> <span class="o">=</span> <span class="n">locFieldName</span><span class="p">,</span> 
            <span class="n">xyReverseFlag</span> <span class="o">=</span> <span class="n">xyReverseFlag</span><span class="p">)</span>
        <span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span> <span class="o">=</span> <span class="n">boundingBox</span>
        <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">=</span> <span class="n">findFigSize</span><span class="p">(</span><span class="n">boundingBox</span><span class="p">,</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span>

    <span class="c1"># Draw nodes ==============================================================</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
        <span class="c1"># Define color --------------------------------------------------------</span>
        <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;color&#39;</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">nodeColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">nodeColor</span>

        <span class="c1"># Define marker and marker size ---------------------------------------</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;marker&#39;</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]):</span>
            <span class="n">nodeMarker</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="s1">&#39;marker&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;markerSize&#39;</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]):</span>
            <span class="n">nodeMarkerSize</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="s1">&#39;markerSize&#39;</span><span class="p">]</span>

        <span class="c1"># plot nodes ----------------------------------------------------------</span>
        <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">locFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">locFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">locFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">locFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">nodeMarkerSize</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="n">nodeMarker</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="n">nodeMarker</span><span class="p">,</span> <span class="n">markersize</span> <span class="o">=</span> <span class="n">nodeMarkerSize</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;label&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]):</span>
            <span class="n">lbl</span> <span class="o">=</span> <span class="n">n</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lbl</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="s1">&#39;label&#39;</span><span class="p">]</span>

        <span class="n">ha</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;ha&#39;</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]):</span>
            <span class="n">ha</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="s1">&#39;ha&#39;</span><span class="p">]</span>
        <span class="n">va</span> <span class="o">=</span> <span class="s1">&#39;top&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;va&#39;</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]):</span>
            <span class="n">va</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="s1">&#39;va&#39;</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">lbl</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="n">ha</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="n">va</span><span class="p">)</span>

    <span class="c1"># Axis on and off =========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showAxis</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="c1"># Save figure =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">saveFigPath</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">saveFigPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showFig</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotArcs">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotArcs">[docs]</a>
<span class="k">def</span> <span class="nf">plotArcs</span><span class="p">(</span>
    <span class="n">arcs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">arcFieldName</span> <span class="o">=</span> <span class="s1">&#39;arc&#39;</span><span class="p">,</span>
    <span class="n">arcStartLocFieldName</span> <span class="o">=</span> <span class="s1">&#39;startLoc&#39;</span><span class="p">,</span>
    <span class="n">arcEndLocFieldName</span> <span class="o">=</span> <span class="s1">&#39;endLoc&#39;</span><span class="p">,</span>
    <span class="n">arcColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">arcWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">arcLabel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">arcStyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;solid&#39;</span><span class="p">,</span>
    <span class="n">arcDashes</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="n">arrowFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">arrowPosition</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">arrowHeadWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">,</span>
    <span class="n">arrowHeadLength</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
    <span class="n">startColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
    <span class="n">endColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
    <span class="n">bothEndSize</span><span class="p">:</span> <span class="nb">int</span><span class="o">|</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Draw arcs</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>

<span class="sd">    arcs: dict, required</span>
<span class="sd">        An `arcs` dictionary, each arc is defined by two points. See :ref:`arcs` for reference.</span>
<span class="sd">    arcColor: string, optional, default &#39;Random&#39;</span>
<span class="sd">        Color of arcs</span>
<span class="sd">    arcWidth: float, optional, default 1</span>
<span class="sd">        Width of arcs</span>
<span class="sd">    arrowFlag: bool, optional, default True</span>
<span class="sd">        True if plot arrows</span>
<span class="sd">    arrowHeadWidth: float, optional, default 0.1</span>
<span class="sd">        Width of arrow head</span>
<span class="sd">    arrowHeadLength: float, optional, default 0.2</span>
<span class="sd">        Length of arrow head</span>
<span class="sd">    fig: matplotlib object, optional, default None</span>
<span class="sd">        `fig` and `ax` indicates the matplotlib object to plot on, if not provided, plot in a new figure</span>
<span class="sd">    ax: matplotlib object, optional, default None</span>
<span class="sd">        See `fig`</span>
<span class="sd">    xyReverseFlag: bool, optional, default False</span>
<span class="sd">        True if need to reverse the x, y coordinates, e.g., plot for (lat, lon)</span>
<span class="sd">    figSize: 2-tuple, optional, default as (None, 5)</span>
<span class="sd">        Size of the figure in (width, height). If width or height is set to be None, it will be auto-adjusted.</span>
<span class="sd">    boundingBox: 4-tuple, optional, default as (None, None, None, None)</span>
<span class="sd">        (xMin, xMax, yMin, yMax), defines four boundaries of the figure</span>
<span class="sd">    saveFigPath: string, optional, default as None</span>
<span class="sd">        The path for exporting image if provided</span>
<span class="sd">    showFig: bool, optional, default as True</span>
<span class="sd">        True if show the figure in Juypter Notebook environment</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    fig, ax</span>
<span class="sd">        matplotlib.pyplot object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Check for required fields ===============================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">arcs</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="s2">&quot;ERROR: Missing required field `arcs`.&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">arcFieldName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">and</span> <span class="n">arcStartLocFieldName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">and</span> <span class="n">arcEndLocFieldName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="s2">&quot;ERROR: Cannot find arc field in given `arcs` - </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>

    <span class="c1"># If no based matplotlib figure provided, define boundary =================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">findBoundingBox</span><span class="p">(</span>
            <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">boundingBox</span><span class="p">,</span> 
            <span class="n">arcs</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">,</span> 
            <span class="n">arcFieldName</span> <span class="o">=</span> <span class="n">arcFieldName</span><span class="p">,</span>
            <span class="n">arcStartLocFieldName</span> <span class="o">=</span> <span class="n">arcStartLocFieldName</span><span class="p">,</span>
            <span class="n">arcEndLocFieldName</span> <span class="o">=</span> <span class="n">arcEndLocFieldName</span><span class="p">,</span> 
            <span class="n">xyReverseFlag</span> <span class="o">=</span> <span class="n">xyReverseFlag</span><span class="p">)</span>
        <span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span> <span class="o">=</span> <span class="n">boundingBox</span>
        <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">=</span> <span class="n">findFigSize</span><span class="p">(</span><span class="n">boundingBox</span><span class="p">,</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span>

    <span class="c1"># Draw arcs ===============================================================</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">arcFieldName</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>        
            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
                <span class="n">x1</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">x2</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">y1</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">y2</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x1</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">x2</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">y1</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">y2</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">arcStartLocFieldName</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">and</span> <span class="n">arcEndLocFieldName</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
                <span class="n">x1</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcStartLocFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">y1</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcStartLocFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">x2</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcEndLocFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">y2</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcEndLocFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x1</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcStartLocFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">y1</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcStartLocFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">x2</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcEndLocFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">y2</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">arcEndLocFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="s2">&quot;ERROR: Cannot find corresponded `arcFieldName` or (`arcStartLocFieldName` and `arcEndLocFieldName`) in given `arcs` structure.&quot;</span><span class="p">)</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">arcColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
            <span class="n">rndColor</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">],</span> <span class="p">[</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="n">rndColor</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">arcWidth</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="n">arcStyle</span><span class="p">,</span> <span class="n">dashes</span> <span class="o">=</span> <span class="n">arcDashes</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">arrowFlag</span><span class="p">):</span>
                <span class="n">deg</span> <span class="o">=</span> <span class="n">headingXY</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">],</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">])</span>
                <span class="n">ptC</span> <span class="o">=</span> <span class="p">[</span><span class="n">x1</span> <span class="o">+</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="n">arrowPosition</span><span class="p">,</span> <span class="n">y1</span> <span class="o">+</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">*</span> <span class="n">arrowPosition</span><span class="p">]</span>
                <span class="n">ptM</span> <span class="o">=</span> <span class="n">ptInDistXY</span><span class="p">(</span><span class="n">ptC</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">deg</span> <span class="o">+</span> <span class="mi">180</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">arrowHeadLength</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">ptH</span> <span class="o">=</span> <span class="n">ptInDistXY</span><span class="p">(</span><span class="n">ptC</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">deg</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">arrowHeadLength</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">pt1</span> <span class="o">=</span> <span class="n">ptInDistXY</span><span class="p">(</span><span class="n">ptM</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">deg</span> <span class="o">+</span> <span class="mi">90</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">arrowHeadWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">pt2</span> <span class="o">=</span> <span class="n">ptInDistXY</span><span class="p">(</span><span class="n">ptM</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">deg</span> <span class="o">-</span> <span class="mi">90</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">arrowHeadWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">([</span><span class="n">ptH</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pt1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pt2</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">ptH</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pt1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pt2</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">rndColor</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="n">rndColor</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                <span class="c1"># ax.arrow(x=x1, y=y1, dx=dx * arrowPosition, dy=dy * arrowPosition, linewidth=arcWidth, head_width=arrowHeadWidth, head_length=arrowHeadLength, color=rndColor)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">],</span> <span class="p">[</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="n">arcColor</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">arcWidth</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="n">arcStyle</span><span class="p">,</span> <span class="n">dashes</span> <span class="o">=</span> <span class="n">arcDashes</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">arrowFlag</span><span class="p">):</span>
                <span class="n">deg</span> <span class="o">=</span> <span class="n">headingXY</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">],</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">])</span>
                <span class="n">ptC</span> <span class="o">=</span> <span class="p">[</span><span class="n">x1</span> <span class="o">+</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="n">arrowPosition</span><span class="p">,</span> <span class="n">y1</span> <span class="o">+</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">*</span> <span class="n">arrowPosition</span><span class="p">]</span>
                <span class="n">ptM</span> <span class="o">=</span> <span class="n">ptInDistXY</span><span class="p">(</span><span class="n">ptC</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">deg</span> <span class="o">+</span> <span class="mi">180</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">arrowHeadLength</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">ptH</span> <span class="o">=</span> <span class="n">ptInDistXY</span><span class="p">(</span><span class="n">ptC</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">deg</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">arrowHeadLength</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">pt1</span> <span class="o">=</span> <span class="n">ptInDistXY</span><span class="p">(</span><span class="n">ptM</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">deg</span> <span class="o">+</span> <span class="mi">90</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">arrowHeadWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">pt2</span> <span class="o">=</span> <span class="n">ptInDistXY</span><span class="p">(</span><span class="n">ptM</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">deg</span> <span class="o">-</span> <span class="mi">90</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">arrowHeadWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">([</span><span class="n">ptH</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pt1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pt2</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">ptH</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pt1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pt2</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">arcColor</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="n">arcColor</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">startColor</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">markersize</span> <span class="o">=</span> <span class="n">bothEndSize</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">markersize</span> <span class="o">=</span> <span class="n">bothEndSize</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">arcLabel</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s1">&#39;label&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
            <span class="n">lbl</span> <span class="o">=</span> <span class="n">i</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">arcLabel</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">lbl</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;label&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lbl</span> <span class="o">=</span> <span class="n">arcLabel</span>
        <span class="n">ha</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;ha&#39;</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
            <span class="n">ha</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;ha&#39;</span><span class="p">]</span>
        <span class="n">va</span> <span class="o">=</span> <span class="s1">&#39;top&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;va&#39;</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
            <span class="n">va</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;va&#39;</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">lbl</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span> <span class="o">+</span> <span class="n">dx</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y1</span> <span class="o">+</span> <span class="n">dy</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="n">ha</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="n">va</span><span class="p">)</span>

    <span class="c1"># Axis on and off =========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showAxis</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="c1"># Save figure =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">saveFigPath</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">saveFigPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showFig</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotLocSeq">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotLocSeq">[docs]</a>
<span class="k">def</span> <span class="nf">plotLocSeq</span><span class="p">(</span>
    <span class="n">locSeq</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">pt</span><span class="p">],</span>
    <span class="n">lineColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">lineWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">lineStyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;solid&#39;</span><span class="p">,</span>
    <span class="n">lineDashes</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="n">nodeColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
    <span class="n">nodeMarkerSize</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">arrowFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">arrowPosition</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">arrowHeadWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">arrowHeadLength</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a list of coordinates, plot a open polyline by sequences.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>

<span class="sd">    locSeq: list[pt], required</span>
<span class="sd">        A list of coordinates to form a sequence</span>
<span class="sd">    lineColor: string, optional, default &#39;Random&#39;</span>
<span class="sd">        Color of lines</span>
<span class="sd">    lineWidth: float, optional, default 1</span>
<span class="sd">        Width of lines</span>
<span class="sd">    arrowFlag: bool, optional, default True</span>
<span class="sd">        True if plot arrows</span>
<span class="sd">    arrowHeadWidth: float, optional, default 0.1</span>
<span class="sd">        Width of arrow head</span>
<span class="sd">    arrowHeadLength: float, optional, default 0.2</span>
<span class="sd">        Length of arrow head</span>
<span class="sd">    xyReverseFlag: bool, optional, default False</span>
<span class="sd">        True if need to reverse the x, y coordinates, e.g., plot for (lat, lon)</span>
<span class="sd">    fig: matplotlib object, optional, default None</span>
<span class="sd">        `fig` and `ax` indicates the matplotlib object to plot on, if not provided, plot in a new figure</span>
<span class="sd">    ax: matplotlib object, optional, default None</span>
<span class="sd">        See `fig`</span>
<span class="sd">    figSize: 2-tuple, optional, default as (None, 5)</span>
<span class="sd">        Size of the figure in (width, height). If width or height is set to be None, it will be auto-adjusted.</span>
<span class="sd">    boundingBox: 4-tuple, optional, default as (None, None, None, None)</span>
<span class="sd">        (xMin, xMax, yMin, yMax), defines four boundaries of the figure</span>
<span class="sd">    saveFigPath: string, optional, default as None</span>
<span class="sd">        The path for exporting image if provided</span>
<span class="sd">    showFig: bool, optional, default as True</span>
<span class="sd">        True if show the figure in Juypter Notebook environment</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    fig, ax: matplotlib.pyplot object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Check for required fields ===============================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">locSeq</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="s2">&quot;ERROR: Missing required field `locSeq`.&quot;</span><span class="p">)</span>

    <span class="n">arcs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">locSeq</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">is2PtsSame</span><span class="p">(</span><span class="n">locSeq</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">locSeq</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])):</span>
            <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;arc&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">locSeq</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">locSeq</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]]}</span>

    <span class="c1"># Color ===================================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">lineColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
        <span class="n">lineColor</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plotArcs</span><span class="p">(</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">fig</span><span class="p">,</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="p">,</span>
        <span class="n">arcs</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">,</span>
        <span class="n">arcFieldName</span> <span class="o">=</span> <span class="s1">&#39;arc&#39;</span><span class="p">,</span>
        <span class="n">arcColor</span> <span class="o">=</span> <span class="n">lineColor</span><span class="p">,</span>
        <span class="n">arcWidth</span> <span class="o">=</span> <span class="n">lineWidth</span><span class="p">,</span>
        <span class="n">arcStyle</span> <span class="o">=</span> <span class="n">lineStyle</span><span class="p">,</span>
        <span class="n">arcDashes</span> <span class="o">=</span> <span class="n">lineDashes</span> <span class="k">if</span> <span class="n">lineStyle</span> <span class="o">==</span> <span class="s1">&#39;dashed&#39;</span> <span class="k">else</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">arcLabel</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">arrowFlag</span> <span class="o">=</span> <span class="n">arrowFlag</span><span class="p">,</span>
        <span class="n">arrowPosition</span> <span class="o">=</span> <span class="n">arrowPosition</span><span class="p">,</span>
        <span class="n">arrowHeadWidth</span> <span class="o">=</span> <span class="n">arrowHeadWidth</span><span class="p">,</span>
        <span class="n">arrowHeadLength</span> <span class="o">=</span> <span class="n">arrowHeadLength</span><span class="p">,</span>
        <span class="n">startColor</span> <span class="o">=</span> <span class="n">nodeColor</span><span class="p">,</span>
        <span class="n">endColor</span> <span class="o">=</span> <span class="n">nodeColor</span> <span class="p">,</span>
        <span class="n">bothEndSize</span> <span class="o">=</span> <span class="n">nodeMarkerSize</span><span class="p">,</span>
        <span class="n">xyReverseFlag</span> <span class="o">=</span> <span class="n">xyReverseFlag</span><span class="p">,</span>
        <span class="n">figSize</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">,</span>
        <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">boundingBox</span><span class="p">,</span>
        <span class="n">showAxis</span> <span class="o">=</span> <span class="n">showAxis</span><span class="p">,</span>
        <span class="n">saveFigPath</span> <span class="o">=</span> <span class="n">saveFigPath</span><span class="p">,</span>
        <span class="n">showFig</span> <span class="o">=</span> <span class="n">showFig</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotLocSeq3D">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotLocSeq3D">[docs]</a>
<span class="k">def</span> <span class="nf">plotLocSeq3D</span><span class="p">(</span>
    <span class="n">locSeq3D</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">pt3D</span><span class="p">],</span>
    <span class="n">lineColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">lineWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">lineStyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;solid&#39;</span><span class="p">,</span>
    <span class="n">lineDashes</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="n">nodeColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
    <span class="n">nodeMarkerSize</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox3D</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>

    <span class="c1"># Check for required fields ===============================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">locSeq3D</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="s2">&quot;ERROR: Missing required field `locSeq3D`.&quot;</span><span class="p">)</span>

    <span class="c1"># If no based matplotlib figure provided, define boundary =================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span> <span class="o">=</span> <span class="s1">&#39;3d&#39;</span><span class="p">)</span>
        <span class="n">boundingBox3D</span> <span class="o">=</span> <span class="n">findBoundingBox3D</span><span class="p">(</span>
            <span class="n">boundingBox3D</span> <span class="o">=</span> <span class="n">boundingBox3D</span><span class="p">,</span> 
            <span class="n">pts3D</span> <span class="o">=</span> <span class="n">locSeq3D</span><span class="p">)</span>
        <span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">,</span> <span class="n">zMin</span><span class="p">,</span> <span class="n">zMax</span><span class="p">)</span> <span class="o">=</span> <span class="n">boundingBox3D</span>
        <span class="c1"># (width, height) = findFigSize(boundingBox3D, figSize[0], figSize[1])</span>
        <span class="c1"># fig.set_figwidth(width)</span>
        <span class="c1"># fig.set_figheight(height)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_zlim</span><span class="p">(</span><span class="n">zMin</span><span class="p">,</span> <span class="n">zMax</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">z</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">locSeq3D</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
            <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

    <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">lineColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">lineColor</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">lineStyle</span> <span class="o">==</span> <span class="s1">&#39;dashed&#39;</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">lineWidth</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">dashes</span> <span class="o">=</span> <span class="n">lineDashes</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">lineWidth</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="n">lineStyle</span><span class="p">)</span>
            
    <span class="c1"># Axis on and off =========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showAxis</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="c1"># Save figure =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">saveFigPath</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">saveFigPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showFig</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotNodeSeq">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotNodeSeq">[docs]</a>
<span class="k">def</span> <span class="nf">plotNodeSeq</span><span class="p">(</span>
    <span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> 
    <span class="n">nodeSeq</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="o">|</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">locFieldName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;loc&#39;</span><span class="p">,</span>
    <span class="n">lineColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">lineWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">lineStyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;solid&#39;</span><span class="p">,</span>
    <span class="n">lineDashes</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="n">nodeColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
    <span class="n">nodeMarkerSize</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">arrowFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">arrowPosition</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">arrowHeadWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">arrowHeadLength</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a `nodes` dictionary and a sequence of node IDs, plot a route that visits each node by IDs.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    nodes: dict, required</span>
<span class="sd">        A `node` dictionary. See :ref:`nodes` for reference.</span>
<span class="sd">    nodeSeq: list[int|str], required</span>
<span class="sd">        A list of nodeIDs which will form a visiting sequence</span>
<span class="sd">    arcColor: string, optional, default &#39;Random&#39;</span>
<span class="sd">        Color of arcs</span>
<span class="sd">    arcWidth: float, optional, default 1</span>
<span class="sd">        Width of arcs</span>
<span class="sd">    arrowFlag: bool, optional, default True</span>
<span class="sd">        True if plot arrows</span>
<span class="sd">    arrowHeadWidth: float, optional, default 0.1</span>
<span class="sd">        Width of arrow head</span>
<span class="sd">    arrowHeadLength: float, optional, default 0.2</span>
<span class="sd">        Length of arrow head</span>
<span class="sd">    xyReverseFlag: bool, optional, default False</span>
<span class="sd">        True if need to reverse the x, y coordinates, e.g., plot for (lat, lon)</span>
<span class="sd">    fig: matplotlib object, optional, default None</span>
<span class="sd">        `fig` and `ax` indicates the matplotlib object to plot on, if not provided, plot in a new figure</span>
<span class="sd">    ax: matplotlib object, optional, default None</span>
<span class="sd">        See `fig`</span>
<span class="sd">    figSize: 2-tuple, optional, default as (None, 5)</span>
<span class="sd">        Size of the figure in (width, height). If width or height is set to be None, it will be auto-adjusted.</span>
<span class="sd">    boundingBox: 4-tuple, optional, default as (None, None, None, None)</span>
<span class="sd">        (xMin, xMax, yMin, yMax), defines four boundaries of the figure</span>
<span class="sd">    saveFigPath: string, optional, default as None</span>
<span class="sd">        The path for exporting image if provided</span>
<span class="sd">    showFig: bool, optional, default as True</span>
<span class="sd">        True if show the figure in Juypter Notebook environment</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    fig, ax: matplotlib.pyplot object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Create arcs =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nodeSeq</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="s2">&quot;ERROR: Missing required field `nodeSeq`.&quot;</span><span class="p">)</span>
    <span class="c1"># Call plotArcs ===========================================================</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nodeSeq</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">UnsupportedInputError</span><span class="p">(</span><span class="s2">&quot;ERROR: Cannot find </span><span class="si">%s</span><span class="s2"> in nodes&quot;</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>

    <span class="n">arcs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nodeSeq</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">arcs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;arc&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">nodes</span><span class="p">[</span><span class="n">nodeSeq</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">locFieldName</span><span class="p">],</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nodeSeq</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]][</span><span class="n">locFieldName</span><span class="p">]]}</span>

    <span class="c1"># Color ===================================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">lineColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
        <span class="n">lineColor</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plotArcs</span><span class="p">(</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">fig</span><span class="p">,</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="p">,</span>
        <span class="n">arcs</span> <span class="o">=</span> <span class="n">arcs</span><span class="p">,</span>
        <span class="n">arcFieldName</span> <span class="o">=</span> <span class="s1">&#39;arc&#39;</span><span class="p">,</span>
        <span class="n">arcColor</span> <span class="o">=</span> <span class="n">lineColor</span><span class="p">,</span>
        <span class="n">arcWidth</span> <span class="o">=</span> <span class="n">lineWidth</span><span class="p">,</span>
        <span class="n">arcStyle</span> <span class="o">=</span> <span class="n">lineStyle</span><span class="p">,</span>
        <span class="n">arcDashes</span> <span class="o">=</span> <span class="n">lineDashes</span> <span class="k">if</span> <span class="n">lineStyle</span> <span class="o">==</span> <span class="s1">&#39;dashed&#39;</span> <span class="k">else</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">arcLabel</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">arrowFlag</span> <span class="o">=</span> <span class="n">arrowFlag</span><span class="p">,</span>
        <span class="n">arrowPosition</span> <span class="o">=</span> <span class="n">arrowPosition</span><span class="p">,</span>
        <span class="n">arrowHeadWidth</span> <span class="o">=</span> <span class="n">arrowHeadWidth</span><span class="p">,</span>
        <span class="n">arrowHeadLength</span> <span class="o">=</span> <span class="n">arrowHeadLength</span><span class="p">,</span>
        <span class="n">startColor</span> <span class="o">=</span> <span class="n">nodeColor</span><span class="p">,</span>
        <span class="n">endColor</span> <span class="o">=</span> <span class="n">nodeColor</span> <span class="p">,</span>
        <span class="n">bothEndSize</span> <span class="o">=</span> <span class="n">nodeMarkerSize</span><span class="p">,</span>
        <span class="n">xyReverseFlag</span> <span class="o">=</span> <span class="n">xyReverseFlag</span><span class="p">,</span>
        <span class="n">figSize</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">,</span>
        <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">boundingBox</span><span class="p">,</span>
        <span class="n">showAxis</span> <span class="o">=</span> <span class="n">showAxis</span><span class="p">,</span>
        <span class="n">saveFigPath</span> <span class="o">=</span> <span class="n">saveFigPath</span><span class="p">,</span>
        <span class="n">showFig</span> <span class="o">=</span> <span class="n">showFig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotPoly">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotPoly">[docs]</a>
<span class="k">def</span> <span class="nf">plotPoly</span><span class="p">(</span>
    <span class="n">poly</span><span class="p">:</span> <span class="n">poly</span><span class="p">,</span> 
    <span class="n">edgeWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">edgeColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">fillColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fillStyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;///&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Draw a polygon</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>

<span class="sd">    poly: poly, required, default None</span>
<span class="sd">        A polygon to be plotted</span>
<span class="sd">    edgeWidth: float, optional, default 0.5</span>
<span class="sd">        Width of the edge</span>
<span class="sd">    edgeColor: string, optional, default &#39;Random&#39;</span>
<span class="sd">        Color of the edge</span>
<span class="sd">    fillColor: string, optional, default None</span>
<span class="sd">        Color filled in the polygon</span>
<span class="sd">    fillStyle: string, optional, default &quot;///&quot;</span>
<span class="sd">        Style filled in the polygon</span>
<span class="sd">    opacity: float, optional, default 0.5</span>
<span class="sd">        Opacity of the polygon</span>
<span class="sd">    xyReverseFlag: bool, optional, default False</span>
<span class="sd">        True if need to reverse the x, y coordinates, e.g., plot for (lat, lon)</span>
<span class="sd">    fig: matplotlib object, optional, defaut None</span>
<span class="sd">        `fig` and `ax` indicates the matplotlib object to plot on, if not provided, plot in a new figure</span>
<span class="sd">    ax: matplotlib object, optional, default None</span>
<span class="sd">        See `fig`</span>
<span class="sd">    figSize: 2-tuple, optional, default as (None, 5)</span>
<span class="sd">        Size of the figure in (width, height). If width or height is set to be None, it will be auto-adjusted.</span>
<span class="sd">    boundingBox: 4-tuple, optional, default as (None, None, None, None)</span>
<span class="sd">        (xMin, xMax, yMin, yMax), defines four boundaries of the figure</span>
<span class="sd">    saveFigPath: string, optional, default as None</span>
<span class="sd">        The path for exporting image if provided</span>
<span class="sd">    showFig: bool, optional, default as True</span>
<span class="sd">        True if show the figure in Juypter Notebook environment</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    fig, ax: matplotlib.pyplot object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Check for required fields ===============================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">poly</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="s2">&quot;ERROR: Missing required field `poly`.&quot;</span><span class="p">)</span>

    <span class="c1"># If no based matplotlib figure provided, define boundary =================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">findBoundingBox</span><span class="p">(</span>
            <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">boundingBox</span><span class="p">,</span> 
            <span class="n">poly</span> <span class="o">=</span> <span class="n">poly</span><span class="p">)</span>
        <span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span> <span class="o">=</span> <span class="n">boundingBox</span>
        <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">=</span> <span class="n">findFigSize</span><span class="p">(</span><span class="n">boundingBox</span><span class="p">,</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span>

    <span class="c1"># Get the x, y list =======================================================</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
            <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">CONST_EPSILON</span><span class="p">):</span>
        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="c1"># Plot ====================================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">edgeColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
        <span class="n">edgeColor</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fillColor</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">edgeColor</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="n">edgeWidth</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">fillColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">colorRandom</span><span class="p">(),</span> <span class="n">edgecolor</span><span class="o">=</span><span class="n">edgeColor</span><span class="p">,</span> <span class="n">hatch</span><span class="o">=</span><span class="n">fillStyle</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">edgeWidth</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">opacity</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">fillColor</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="n">edgeColor</span><span class="p">,</span> <span class="n">hatch</span><span class="o">=</span><span class="n">fillStyle</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">edgeWidth</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">opacity</span><span class="p">)</span>

    <span class="c1"># Axis on and off =========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showAxis</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="c1"># Save figure =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">saveFigPath</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">saveFigPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showFig</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotPolyhedron3D">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotPolyhedron3D">[docs]</a>
<span class="k">def</span> <span class="nf">plotPolyhedron3D</span><span class="p">(</span>
    <span class="n">polyhedron</span><span class="p">:</span> <span class="n">poly</span><span class="p">,</span> 
    <span class="n">edgeWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">edgeColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">fillColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fillStyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;///&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotCircle">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotCircle">[docs]</a>
<span class="k">def</span> <span class="nf">plotCircle</span><span class="p">(</span>
    <span class="n">center</span><span class="p">:</span> <span class="n">pt</span><span class="p">,</span> 
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">lod</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
    <span class="n">edgeWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">edgeColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">fillColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fillStyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;///&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>

    <span class="n">polyCircle</span> <span class="o">=</span> <span class="p">[[</span>
        <span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">d</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="n">lod</span><span class="p">),</span>
        <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">d</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="n">lod</span><span class="p">),</span>
    <span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lod</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plotPoly</span><span class="p">(</span>
        <span class="n">poly</span> <span class="o">=</span> <span class="n">polyCircle</span><span class="p">,</span>
        <span class="n">edgeWidth</span> <span class="o">=</span> <span class="n">edgeWidth</span><span class="p">,</span>
        <span class="n">edgeColor</span> <span class="o">=</span> <span class="n">edgeColor</span><span class="p">,</span>
        <span class="n">fillColor</span> <span class="o">=</span> <span class="n">fillColor</span><span class="p">,</span>
        <span class="n">fillStyle</span> <span class="o">=</span> <span class="n">fillStyle</span><span class="p">,</span>
        <span class="n">opacity</span> <span class="o">=</span> <span class="n">opacity</span><span class="p">,</span>
        <span class="n">xyReverseFlag</span> <span class="o">=</span> <span class="n">xyReverseFlag</span><span class="p">,</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">fig</span><span class="p">,</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="p">,</span>
        <span class="n">figSize</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">,</span>
        <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">boundingBox</span><span class="p">,</span>
        <span class="n">showAxis</span> <span class="o">=</span> <span class="n">showAxis</span><span class="p">,</span>
        <span class="n">saveFigPath</span> <span class="o">=</span> <span class="n">saveFigPath</span><span class="p">,</span>
        <span class="n">showFig</span> <span class="o">=</span> <span class="n">showFig</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotCone3D">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotCone3D">[docs]</a>
<span class="k">def</span> <span class="nf">plotCone3D</span><span class="p">(</span>
    <span class="n">cone</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">lod</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
    <span class="n">tanAlpha</span><span class="p">:</span> <span class="nb">float</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>    
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">boundingBox3D</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span> <span class="o">=</span> <span class="s1">&#39;3d&#39;</span><span class="p">)</span>
        <span class="n">boundingBox3D</span> <span class="o">=</span> <span class="n">findBoundingBox3D</span><span class="p">(</span>
            <span class="n">boundingBox3D</span> <span class="o">=</span> <span class="n">boundingBox3D</span><span class="p">,</span> 
            <span class="n">cone</span> <span class="o">=</span> <span class="n">cone</span><span class="p">)</span>
        <span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">,</span> <span class="n">zMin</span><span class="p">,</span> <span class="n">zMax</span><span class="p">)</span> <span class="o">=</span> <span class="n">boundingBox3D</span>
        <span class="c1"># (width, height) = findFigSize(boundingBox3D, figSize[0], figSize[1])</span>
        <span class="c1"># fig.set_figwidth(width)</span>
        <span class="c1"># fig.set_figheight(height)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_zlim</span><span class="p">(</span><span class="n">zMin</span><span class="p">,</span> <span class="n">zMax</span><span class="p">)</span>

    <span class="n">x0</span> <span class="o">=</span> <span class="n">cone</span><span class="p">[</span><span class="s1">&#39;center&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">y0</span> <span class="o">=</span> <span class="n">cone</span><span class="p">[</span><span class="s1">&#39;center&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">z0</span> <span class="o">=</span> <span class="n">cone</span><span class="p">[</span><span class="s1">&#39;center&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cone</span><span class="p">[</span><span class="s1">&#39;center&#39;</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">zMax</span> <span class="o">=</span> <span class="n">cone</span><span class="p">[</span><span class="s1">&#39;maxHeight&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;tanAlpha&#39;</span> <span class="ow">in</span> <span class="n">cone</span><span class="p">):</span>
        <span class="n">tanAlpha</span> <span class="o">=</span> <span class="n">cone</span><span class="p">[</span><span class="s1">&#39;tanAlpha&#39;</span><span class="p">]</span>
    <span class="n">rMax</span> <span class="o">=</span> <span class="n">zMax</span> <span class="o">*</span> <span class="n">tanAlpha</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">rMax</span><span class="p">,</span> <span class="n">lod</span><span class="p">)</span>
    <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">lod</span><span class="p">)</span>
    <span class="n">r</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span>

    <span class="n">X</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">+</span> <span class="n">x0</span>
    <span class="n">Y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">+</span> <span class="n">y0</span>

    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">tanAlpha</span> <span class="o">+</span> <span class="n">z0</span>

    <span class="n">Z</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot_surface</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">rstride</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cstride</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">jet</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
                <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">);</span>
    
    <span class="c1"># Axis on and off =========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showAxis</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="c1"># Save figure =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">saveFigPath</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">saveFigPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showFig</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotPolygons">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotPolygons">[docs]</a>
<span class="k">def</span> <span class="nf">plotPolygons</span><span class="p">(</span>
    <span class="n">polygons</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">polyFieldName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;poly&#39;</span><span class="p">,</span>
    <span class="n">showAnchorFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">anchorFieldName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;anchor&#39;</span><span class="p">,</span>
    <span class="n">edgeWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">edgeColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">fillColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fillStyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;///&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>

    <span class="c1"># Sanity check ============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">UnsupportedInputError</span><span class="p">(</span><span class="s2">&quot;ERROR: `polygons` is a dictionary, to plot an individual polygon, please use plotPoly() instead.&quot;</span><span class="p">)</span>

    <span class="c1"># If no based matplotlib figure provided, define boundary =================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">findBoundingBox</span><span class="p">(</span>
            <span class="n">boundingBox</span> <span class="o">=</span> <span class="n">boundingBox</span><span class="p">,</span> 
            <span class="n">polygons</span> <span class="o">=</span> <span class="n">polygons</span><span class="p">,</span>
            <span class="n">anchorFieldName</span> <span class="o">=</span> <span class="n">anchorFieldName</span><span class="p">,</span>
            <span class="n">polyFieldName</span> <span class="o">=</span> <span class="n">polyFieldName</span><span class="p">,</span>
            <span class="n">xyReverseFlag</span> <span class="o">=</span> <span class="n">xyReverseFlag</span><span class="p">)</span>
        <span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span> <span class="o">=</span> <span class="n">boundingBox</span>
        <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">=</span> <span class="n">findFigSize</span><span class="p">(</span><span class="n">boundingBox</span><span class="p">,</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span>

    <span class="c1"># First, plot polygons ====================================================</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plotPoly</span><span class="p">(</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">fig</span><span class="p">,</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="p">,</span>
            <span class="n">poly</span> <span class="o">=</span> <span class="n">polygons</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">polyFieldName</span><span class="p">],</span>
            <span class="n">edgeWidth</span> <span class="o">=</span> <span class="n">edgeWidth</span><span class="p">,</span>
            <span class="n">edgeColor</span> <span class="o">=</span> <span class="n">edgeColor</span><span class="p">,</span>
            <span class="n">fillColor</span> <span class="o">=</span> <span class="n">fillColor</span><span class="p">,</span>
            <span class="n">fillStyle</span> <span class="o">=</span> <span class="n">fillStyle</span><span class="p">,</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="n">opacity</span><span class="p">,</span>
            <span class="n">xyReverseFlag</span> <span class="o">=</span> <span class="n">xyReverseFlag</span><span class="p">,</span>
            <span class="n">figSize</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">)</span>

    <span class="c1"># Next, plot anchors ======================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">showAnchorFlag</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;label&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">p</span><span class="p">]):</span>
                <span class="n">lbl</span> <span class="o">=</span> <span class="n">p</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lbl</span> <span class="o">=</span> <span class="n">polygons</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="s1">&#39;label&#39;</span><span class="p">]</span>
            <span class="n">ha</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span>
            <span class="n">va</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span>
            <span class="n">ct</span> <span class="o">=</span> <span class="n">polygons</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="s1">&#39;anchor&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">xyReverseFlag</span><span class="p">):</span>
                <span class="n">ct</span> <span class="o">=</span> <span class="p">[</span><span class="n">ct</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ct</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">lbl</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="n">ha</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="n">va</span><span class="p">)</span>

    <span class="c1"># Axis on and off =========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showAxis</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="c1"># Save figure =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">saveFigPath</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">saveFigPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showFig</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotProvinceMap">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotProvinceMap">[docs]</a>
<span class="k">def</span> <span class="nf">plotProvinceMap</span><span class="p">(</span>
    <span class="n">country</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;U.S.&#39;</span><span class="p">,</span>
    <span class="n">province</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">|</span><span class="nb">str</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="n">edgeWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">edgeColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Random&#39;</span><span class="p">,</span>
    <span class="n">fillColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fillStyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;///&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>   
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    
    <span class="n">prvPoly</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">province</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">province</span> <span class="o">=</span> <span class="p">[</span><span class="n">province</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">prv</span> <span class="ow">in</span> <span class="n">province</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">country</span> <span class="o">==</span> <span class="s1">&#39;U.S.&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">prv</span> <span class="ow">in</span> <span class="n">usState</span><span class="p">:</span>
                <span class="n">ct</span> <span class="o">=</span> <span class="n">ptPolyCenter</span><span class="p">(</span><span class="n">usState</span><span class="p">[</span><span class="n">prv</span><span class="p">])</span>
                <span class="n">prvPoly</span><span class="p">[</span><span class="n">prv</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;anchor&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="p">,</span>
                    <span class="s1">&#39;poly&#39;</span><span class="p">:</span> <span class="n">usState</span><span class="p">[</span><span class="n">prv</span><span class="p">]</span>
                <span class="p">}</span>                
            <span class="k">elif</span> <span class="n">prv</span> <span class="ow">in</span> <span class="n">usStateAbbr</span><span class="p">:</span>
                <span class="n">ct</span> <span class="o">=</span> <span class="n">ptPolyCenter</span><span class="p">(</span><span class="n">usState</span><span class="p">[</span><span class="n">usStateAbbr</span><span class="p">[</span><span class="n">prv</span><span class="p">]])</span>
                <span class="n">prvPoly</span><span class="p">[</span><span class="n">prv</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;anchor&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="p">,</span>
                    <span class="s1">&#39;poly&#39;</span><span class="p">:</span> <span class="n">usState</span><span class="p">[</span><span class="n">usStateAbbr</span><span class="p">[</span><span class="n">prv</span><span class="p">]]</span>
                <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">VrpSolverNotAvailableError</span><span class="p">(</span><span class="s2">&quot;Error: </span><span class="si">%s</span><span class="s2"> is not included yet, please stay tune.&quot;</span> <span class="o">%</span> <span class="n">country</span><span class="p">)</span> 
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plotPolygons</span><span class="p">(</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">fig</span><span class="p">,</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="p">,</span>
        <span class="n">polygons</span> <span class="o">=</span> <span class="n">prvPoly</span><span class="p">,</span>
        <span class="n">showAnchorFlag</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">edgeWidth</span> <span class="o">=</span> <span class="n">edgeWidth</span><span class="p">,</span>
        <span class="n">edgeColor</span> <span class="o">=</span> <span class="n">edgeColor</span><span class="p">,</span>
        <span class="n">fillColor</span> <span class="o">=</span> <span class="n">fillColor</span><span class="p">,</span>
        <span class="n">fillStyle</span> <span class="o">=</span> <span class="n">fillStyle</span><span class="p">,</span>
        <span class="n">opacity</span> <span class="o">=</span> <span class="n">opacity</span><span class="p">,</span>
        <span class="n">xyReverseFlag</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">figSize</span><span class="o">=</span><span class="n">figSize</span><span class="p">,</span>
        <span class="n">saveFigPath</span><span class="o">=</span><span class="n">saveFigPath</span><span class="p">,</span>
        <span class="n">showAxis</span> <span class="o">=</span> <span class="n">showAxis</span><span class="p">,</span>
        <span class="n">showFig</span><span class="o">=</span><span class="n">showFig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotRoads">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotRoads">[docs]</a>
<span class="k">def</span> <span class="nf">plotRoads</span><span class="p">(</span>
    <span class="n">roads</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">roadBoundary</span><span class="p">:</span> <span class="n">poly</span><span class="o">|</span><span class="n">polys</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">roadWidth</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">float</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;motorway&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;motorway_link&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;truck&#39;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
            <span class="s1">&#39;truck_link&#39;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
            <span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="mf">1.2</span><span class="p">,</span>
            <span class="s1">&#39;primary_link&#39;</span><span class="p">:</span> <span class="mf">1.2</span><span class="p">,</span>
            <span class="s1">&#39;secondary&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;secondary_link&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;tertiary&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;tertiary_link&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;residential&#39;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
            <span class="s1">&#39;others&#39;</span><span class="p">:</span> <span class="mf">0.8</span>
        <span class="p">},</span>
    <span class="n">roadColors</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">]</span><span class="o">|</span><span class="nb">str</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;motorway&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
            <span class="s1">&#39;motorway_link&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
            <span class="s1">&#39;truck&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
            <span class="s1">&#39;truck_link&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
            <span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
            <span class="s1">&#39;primary_link&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
            <span class="s1">&#39;secondary&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
            <span class="s1">&#39;secondary_link&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
            <span class="s1">&#39;tertiary&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
            <span class="s1">&#39;tertiary_link&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
            <span class="s1">&#39;residential&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
            <span class="s1">&#39;others&#39;</span><span class="p">:</span> <span class="s1">&#39;gray&#39;</span>
        <span class="p">},</span>
    <span class="n">roadShowFlags</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span><span class="o">|</span><span class="nb">str</span><span class="o">|</span><span class="nb">bool</span> <span class="o">=</span> <span class="s1">&#39;All&#39;</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span> 
    <span class="c1"># FIXME: In future, we might want to distinguish roads by max speed or show the names of roads</span>
    <span class="c1"># If no based matplotlib figure, define boundary ==========================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">allX</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">allY</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">roadBoundary</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>    
                <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">roadBoundary</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">:</span>
                        <span class="n">allX</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                        <span class="n">allY</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">roadBoundary</span><span class="p">:</span>
                    <span class="n">allX</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">allY</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">road</span> <span class="ow">in</span> <span class="n">roads</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">roads</span><span class="p">[</span><span class="n">road</span><span class="p">][</span><span class="s1">&#39;shape&#39;</span><span class="p">]:</span>
                    <span class="n">allX</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">allY</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span> <span class="o">=</span> <span class="n">boundingBox</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">xMin</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">xMin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allX</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">xMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allX</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">yMin</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">yMin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allY</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">yMax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">yMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allY</span><span class="p">))</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">height</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span> <span class="o">&gt;</span> <span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">):</span>
                <span class="n">width</span> <span class="o">=</span> <span class="mi">5</span>
                <span class="n">height</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="p">((</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">width</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="p">((</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">))</span>
                <span class="n">height</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">((</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">))</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">((</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">))</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">=</span> <span class="n">figSize</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span>

    <span class="c1"># Plot roads ==============================================================</span>
    <span class="k">for</span> <span class="n">road</span> <span class="ow">in</span> <span class="n">roads</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">roadShowFlags</span> <span class="o">==</span> <span class="s1">&#39;All&#39;</span> <span class="ow">or</span> <span class="n">roadShowFlags</span> <span class="o">==</span> <span class="kc">True</span> 
            <span class="ow">or</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">roadShowFlags</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span> 
                <span class="ow">and</span> <span class="n">roads</span><span class="p">[</span><span class="n">road</span><span class="p">][</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">roadShowFlags</span><span class="p">)):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">roads</span><span class="p">[</span><span class="n">road</span><span class="p">][</span><span class="s1">&#39;shape&#39;</span><span class="p">]:</span>
                <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">roadColors</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
            <span class="k">elif</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">roadColors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">roadColors</span>
            <span class="k">elif</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">roadColors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">roads</span><span class="p">[</span><span class="n">road</span><span class="p">][</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">roadColors</span><span class="p">):</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="n">roadColors</span><span class="p">[</span><span class="n">roads</span><span class="p">[</span><span class="n">road</span><span class="p">][</span><span class="s1">&#39;class&#39;</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>
            <span class="n">rw</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">roadWidth</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">roads</span><span class="p">[</span><span class="n">road</span><span class="p">][</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">roadWidth</span><span class="p">):</span>
                    <span class="n">rw</span> <span class="o">=</span> <span class="n">roadWidth</span><span class="p">[</span><span class="n">roads</span><span class="p">[</span><span class="n">road</span><span class="p">][</span><span class="s1">&#39;class&#39;</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rw</span> <span class="o">=</span> <span class="n">roadWidth</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="n">rw</span><span class="p">)</span>

    <span class="c1"># Axis on and off =========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showAxis</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="c1"># Save figure =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">saveFigPath</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">saveFigPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showFig</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotBuildings">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotBuildings">[docs]</a>
<span class="k">def</span> <span class="nf">plotBuildings</span><span class="p">(</span>
    <span class="n">buildings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">buildingBoundary</span><span class="p">:</span> <span class="n">poly</span><span class="o">|</span><span class="n">polys</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">buildingColors</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">]</span><span class="o">|</span><span class="nb">str</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;building&#39;</span><span class="p">:</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
            <span class="s1">&#39;commercial&#39;</span><span class="p">:</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
            <span class="s1">&#39;residential&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
            <span class="s1">&#39;house&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
            <span class="s1">&#39;static_caravan&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
            <span class="s1">&#39;industrial&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
            <span class="s1">&#39;manufacture&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span>
        <span class="p">},</span>
    <span class="n">buildingShowFlags</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span><span class="o">|</span><span class="nb">str</span><span class="o">|</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">showAxis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span> 
    <span class="c1"># FIXME: In future, we might want to distinguish roads by max speed or show the names of roads</span>
    <span class="c1"># If no based matplotlib figure, define boundary ==========================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">allX</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">allY</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">buildingBoundary</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>    
                <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">buildingBoundary</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">:</span>
                        <span class="n">allX</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                        <span class="n">allY</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">buildingBoundary</span><span class="p">:</span>
                    <span class="n">allX</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">allY</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

        <span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span> <span class="o">=</span> <span class="n">boundingBox</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">xMin</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">xMin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allX</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">xMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allX</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">yMin</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">yMin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allY</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">yMax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">yMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allY</span><span class="p">))</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">height</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span> <span class="o">&gt;</span> <span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">):</span>
                <span class="n">width</span> <span class="o">=</span> <span class="mi">5</span>
                <span class="n">height</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="p">((</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">width</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="p">((</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">))</span>
                <span class="n">height</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">((</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">))</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">((</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">))</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">=</span> <span class="n">figSize</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span>

    <span class="c1"># Plot buildings ==========================================================</span>
    <span class="k">for</span> <span class="n">building</span> <span class="ow">in</span> <span class="n">buildings</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">buildingShowFlags</span> <span class="o">==</span> <span class="s1">&#39;All&#39;</span> <span class="ow">or</span> <span class="n">buildingShowFlags</span> <span class="o">==</span> <span class="kc">True</span>
            <span class="ow">or</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">buildingShowFlags</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span>
                <span class="ow">and</span> <span class="n">buildings</span><span class="p">[</span><span class="n">building</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">buildingShowFlags</span><span class="p">)):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">buildings</span><span class="p">[</span><span class="n">building</span><span class="p">][</span><span class="s1">&#39;shape&#39;</span><span class="p">]:</span>
                <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">buildingColors</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
            <span class="k">elif</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">buildingColors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">buildingColors</span>
            <span class="k">elif</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">buildingColors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">buildings</span><span class="p">[</span><span class="n">building</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">buildingColors</span><span class="p">):</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="n">buildingColors</span><span class="p">[</span><span class="n">buildings</span><span class="p">[</span><span class="n">building</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>

    <span class="c1"># Axis on and off =========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showAxis</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="c1"># Save figure =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">saveFigPath</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">saveFigPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showFig</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="plotGantt">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.plotGantt">[docs]</a>
<span class="k">def</span> <span class="nf">plotGantt</span><span class="p">(</span>
    <span class="n">gantt</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span>
    <span class="n">group</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
    <span class="n">phase</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Time&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ganttHeight</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
    <span class="n">ganttLinewidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">ganttBlockHeight</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">groupSeparatorHeight</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">groupSeparatorStyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span>
    <span class="n">groupSeparatorLinewidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">groupSeparatorColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span><span class="p">,</span>
    <span class="n">phaseSeparatorStyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;--&quot;</span><span class="p">,</span>
    <span class="n">phaseSeparatorLinewidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">phaseSeparatorColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span><span class="p">,</span>
    <span class="n">startTime</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">endTime</span><span class="p">:</span> <span class="nb">float</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
    <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">figSize</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">showGridFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">saveFigPath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">showTailFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">showFig</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Given a Gantt dictionary, plot Gantt&quot;</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a Gantt dictionary, plot a Gantt chart</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    gantt: list of dictionaries, required</span>
<span class="sd">        A list of dictionaries, each represents a gantt block, in the following format\</span>
<span class="sd">            &gt;&gt;&gt; gantt = [{</span>
<span class="sd">            ...     &#39;entityID&#39;: entityID, </span>
<span class="sd">            ...     &#39;timeWindow&#39;: [startTime, endTime], </span>
<span class="sd">            ...     &#39;desc&#39;: (optional) description of the window,</span>
<span class="sd">            ...     &#39;color&#39;: (optional, default as &#39;random&#39;) color, </span>
<span class="sd">            ...     &#39;style&#39;: (optional, default as &#39;solid&#39;) &#39;solid&#39; </span>
<span class="sd">            ... }, ... ]</span>
<span class="sd">    group: list of dictionaries, optional, default []</span>
<span class="sd">        Groups of entityIDs, in the following format</span>
<span class="sd">            &gt;&gt;&gt; group = [{</span>
<span class="sd">            ...     &#39;title&#39;: groupTitle,</span>
<span class="sd">            ...     &#39;entities&#39;: [entityID1, entityID2, ...],</span>
<span class="sd">            ...     &#39;showFlag&#39;: True,</span>
<span class="sd">            ...     &#39;backgroundColor&#39;: &#39;gray&#39;,</span>
<span class="sd">            ...     &#39;backgroundOpacity&#39;: 0.5</span>
<span class="sd">            ... }, ... ]</span>
<span class="sd">    phase: list of dictionaries, optional, default []</span>
<span class="sd">        A list of phases, in the following format</span>
<span class="sd">            &gt;&gt;&gt; phase = [{</span>
<span class="sd">            ...     &#39;title&#39;: phaseTitle,</span>
<span class="sd">            ...     &#39;timeWindow&#39;: [startTime, endTime],</span>
<span class="sd">            ...     &#39;backgroundColor&#39;: &#39;gray&#39;,</span>
<span class="sd">            ...     &#39;backgroundOpacity&#39;: 0.5</span>
<span class="sd">            ... }, ... ]</span>
<span class="sd">    xlabel: string, optional, default &quot;Time&quot;</span>
<span class="sd">        The label of x-axis</span>
<span class="sd">    ylabel: string, optional, default &quot;&quot;</span>
<span class="sd">        The label of y-axis</span>
<span class="sd">    fig: matplotlib object, optional, default None</span>
<span class="sd">        `fig` and `ax` indicates the matplotlib object to plot on, if not provided, plot in a new figure</span>
<span class="sd">    ax: matplotlib object, optional, default None</span>
<span class="sd">        See `fig`</span>
<span class="sd">    figSize: 2-tuple, optional, default as (None, 5)</span>
<span class="sd">        Size of the figure in (width, height). If width or height is set to be None, it will be auto-adjusted.    </span>
<span class="sd">    showGridFlag: bool, optional, default as False</span>
<span class="sd">        True if turn the grids on.</span>
<span class="sd">    saveFigPath: string, optional, default as None</span>
<span class="sd">        The path for exporting image if provided</span>
<span class="sd">    showFig: bool, optional, default as True</span>
<span class="sd">        True if show the figure in Juypter Notebook environment</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Check for required fields ===============================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">gantt</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="n">ERROR_MISSING_GANTT</span><span class="p">)</span>

    <span class="c1"># Pre-calculate ===========================================================</span>
    <span class="n">realStart</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">realEnd</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gantt</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;entityID&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">g</span> <span class="ow">or</span> <span class="s1">&#39;timeWindow&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">g</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="s2">&quot;ERROR: Missing &#39;entityID&#39; and &#39;timeWindow&#39; in gantt.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">realStart</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">realStart</span> <span class="o">&gt;</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="n">realStart</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">realEnd</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">realEnd</span> <span class="o">&lt;</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">realEnd</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">startTime</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">startTime</span> <span class="o">=</span> <span class="n">realStart</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">endTime</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">endTime</span> <span class="o">=</span> <span class="n">realEnd</span>

    <span class="c1"># Arrange entities ========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">group</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">group</span> <span class="o">==</span> <span class="p">[]):</span>
        <span class="n">group</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s1">&#39;entities&#39;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s1">&#39;showFlag&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;backgroundColor&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;backgroundOpacity&#39;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}]</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gantt</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;entityID&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]):</span>
                <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;entityID&#39;</span><span class="p">])</span>

    <span class="n">entities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">group</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;showFlag&#39;</span><span class="p">]):</span>
            <span class="n">entities</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;entities&#39;</span><span class="p">])</span>
            <span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">entities</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">entities</span> <span class="o">=</span> <span class="n">entities</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">entities</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>

    <span class="n">totalHeight</span> <span class="o">=</span> <span class="nb">len</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">entities</span> <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">])</span> <span class="o">*</span> <span class="n">ganttBlockHeight</span> <span class="o">+</span> <span class="nb">len</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">entities</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="kc">None</span><span class="p">])</span> <span class="o">*</span> <span class="n">groupSeparatorHeight</span>
    <span class="n">yAcc</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">ganttBlockHeight</span>
    <span class="n">yticks</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">ganttBlockHeight</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">entities</span><span class="p">)):</span>        
        <span class="k">if</span> <span class="p">(</span><span class="n">entities</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">entities</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">yAcc</span> <span class="o">+=</span> <span class="n">ganttBlockHeight</span>
            <span class="n">yticks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yAcc</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">entities</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">entities</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">yAcc</span> <span class="o">+=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">groupSeparatorHeight</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">ganttBlockHeight</span>
            <span class="n">yticks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yAcc</span><span class="p">)</span>

    <span class="c1"># If no based matplotlib figure, define fig size ==========================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">height</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="p">((</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span> <span class="o">/</span> <span class="n">totalHeight</span><span class="p">)</span>
            <span class="n">height</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">totalHeight</span> <span class="o">/</span> <span class="p">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">))</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">((</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span> <span class="o">/</span> <span class="n">totalHeight</span><span class="p">)</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">=</span> <span class="n">figSize</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">)):</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span> <span class="n">endTime</span> <span class="o">+</span> <span class="p">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalHeight</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">yticks</span><span class="p">)</span>   
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">entities</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">)</span>

    <span class="c1"># Plot groups =============================================================</span>
    <span class="n">groupColor</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">groupOpacity</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">groupTitle</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="p">)):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;showFlag&#39;</span><span class="p">]):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;backgroundColor&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
                <span class="n">groupColor</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;backgroundColor&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">groupColor</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colorRandom</span><span class="p">())</span>
            <span class="n">groupOpacity</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;backgroundOpacity&#39;</span><span class="p">])</span>
            <span class="n">groupTitle</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">])</span>
    <span class="n">groupStyle</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">yS</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">yE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">entities</span><span class="p">)):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">entities</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">yE</span> <span class="o">=</span> <span class="n">yticks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">groupStyle</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">yS</span><span class="p">,</span> <span class="n">yE</span><span class="p">])</span>
            <span class="n">yS</span> <span class="o">=</span> <span class="n">yticks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">groupStyle</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">yS</span><span class="p">,</span> <span class="n">yticks</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">ganttBlockHeight</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">groupStyle</span><span class="p">)):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">groupStyle</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">groupStyle</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">([</span><span class="n">startTime</span><span class="p">,</span> <span class="n">startTime</span><span class="p">,</span> <span class="n">endTime</span> <span class="o">+</span> <span class="p">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">endTime</span> <span class="o">+</span> <span class="p">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">startTime</span><span class="p">],</span> 
            <span class="p">[</span><span class="n">s</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">s</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">groupColor</span><span class="p">[</span><span class="n">g</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="n">groupOpacity</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">groupTitle</span><span class="p">[</span><span class="n">g</span><span class="p">],</span> <span class="p">(</span><span class="n">endTime</span> <span class="o">+</span> <span class="p">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">e</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>

    <span class="c1"># Plot phases =============================================================</span>
    <span class="n">phaseSep</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">phaseAnchor</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">phaseTitle</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">phase</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">phase</span> <span class="o">!=</span> <span class="p">[]):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">phaseSeparatorStyle</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">phase</span><span class="p">)):</span>
                <span class="n">sep</span> <span class="o">=</span> <span class="n">phase</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">phase</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">sep</span><span class="p">,</span> <span class="n">sep</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalHeight</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="n">phaseSeparatorColor</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="n">phaseSeparatorLinewidth</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="n">phaseSeparatorStyle</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">phase</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">phase</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalHeight</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="n">phaseSeparatorColor</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="n">phaseSeparatorLinewidth</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="n">phaseSeparatorStyle</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">phase</span><span class="p">)):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;backgroundColor&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">([</span><span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]],</span> 
                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalHeight</span><span class="p">,</span> <span class="n">totalHeight</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
                    <span class="n">color</span><span class="o">=</span><span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;backgroundColor&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;backgroundColor&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Random&#39;</span> <span class="k">else</span> <span class="n">colorRandom</span><span class="p">(),</span> 
                    <span class="n">alpha</span><span class="o">=</span><span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;backgroundOpacity&#39;</span><span class="p">])</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">],</span> <span class="p">(</span><span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">phase</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">totalHeight</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>

    <span class="c1"># Plot each gantt block ===================================================</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">entities</span><span class="p">)):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">entities</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">center</span> <span class="o">=</span> <span class="n">yticks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">top</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="n">yticks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">ganttHeight</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">ent</span> <span class="o">=</span> <span class="p">[</span><span class="n">g</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gantt</span> <span class="k">if</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;entityID&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">entities</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">ent</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;timeWindow&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">s</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;desc&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">g</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;descPosition&#39;</span> <span class="ow">in</span> <span class="n">g</span> <span class="ow">and</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;descPosition&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Inside&#39;</span><span class="p">)):</span>
                    <span class="n">top</span> <span class="o">=</span> <span class="n">yticks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">ganttHeight</span> <span class="o">/</span> <span class="mi">2</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">top</span> <span class="o">=</span> <span class="n">yticks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">ganttHeight</span> <span class="o">/</span> <span class="mi">4</span>
                <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">bottom</span><span class="p">]</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="n">ganttLinewidth</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;color&#39;</span> <span class="ow">in</span> <span class="n">g</span> <span class="ow">or</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;random&#39;</span><span class="p">):</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="n">ganttLinewidth</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">rndColor</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">rndColor</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="n">ganttLinewidth</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;desc&#39;</span> <span class="ow">in</span> <span class="n">g</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;descPosition&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">g</span> <span class="ow">or</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;descPosition&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Top&#39;</span><span class="p">):</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;desc&#39;</span><span class="p">],</span> <span class="p">(</span><span class="n">s</span> <span class="o">+</span> <span class="n">ganttHeight</span> <span class="o">/</span> <span class="mi">8</span><span class="p">,</span> <span class="n">top</span> <span class="o">+</span> <span class="n">ganttHeight</span> <span class="o">/</span> <span class="mi">8</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;descPosition&#39;</span> <span class="ow">in</span> <span class="n">g</span> <span class="ow">and</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;descPosition&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Inside&#39;</span><span class="p">):</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;desc&#39;</span><span class="p">],</span> <span class="p">(</span><span class="n">s</span> <span class="o">+</span> <span class="n">ganttHeight</span> <span class="o">/</span> <span class="mi">8</span><span class="p">,</span> <span class="n">bottom</span> <span class="o">+</span> <span class="n">ganttHeight</span> <span class="o">/</span> <span class="mi">8</span><span class="p">))</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;solid&#39;</span><span class="p">):</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">hatch</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">],</span> <span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="n">ganttLinewidth</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">groupSeparatorStyle</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">center</span> <span class="o">=</span> <span class="n">yticks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">((</span><span class="n">startTime</span><span class="p">,</span> <span class="n">endTime</span> <span class="o">+</span> <span class="p">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">),</span> <span class="p">(</span><span class="n">center</span><span class="p">,</span> <span class="n">center</span><span class="p">),</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="n">groupSeparatorStyle</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="n">groupSeparatorLinewidth</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">groupSeparatorColor</span><span class="p">)</span>

    <span class="c1"># Show time span ==========================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">showTailFlag</span><span class="p">):</span>
        <span class="n">xTicks</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">())</span>
        <span class="n">xTicks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">realEnd</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xTicks</span><span class="p">)</span>  

    <span class="c1"># Grids ===================================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">showGridFlag</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>

    <span class="c1"># Fix height if fig, ax are not provided ==================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fig</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span>

    <span class="c1"># Save figure =============================================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">saveFigPath</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">saveFigPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">showFig</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span></div>


<div class="viewcode-block" id="aniRouting">
<a class="viewcode-back" href="../../vrpSolver.plot.html#vrpSolver.plot.aniRouting">[docs]</a>
<span class="k">def</span> <span class="nf">aniRouting</span><span class="p">(</span>
    <span class="n">timeRange</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span>
    <span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">locFieldName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;loc&#39;</span><span class="p">,</span>
    <span class="n">timedSeqFieldName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;timedSeq&#39;</span><span class="p">,</span>
    <span class="n">timeWindowFieldName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;timeWindow&#39;</span><span class="p">,</span>
    <span class="n">nodeColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
    <span class="n">nodeMarker</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span>
    <span class="n">nodeMarkerSize</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">vehicles</span><span class="p">:</span> <span class="nb">dict</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">vehTimedSeqFieldName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;timedSeq&#39;</span><span class="p">,</span>
    <span class="n">vehLabelFieldName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span>
    <span class="n">vehColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
    <span class="n">vehMarker</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;^&#39;</span><span class="p">,</span>
    <span class="n">vehMarkerSize</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">vehPathColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span><span class="p">,</span>
    <span class="n">vehPathWidth</span><span class="p">:</span> <span class="nb">float</span><span class="o">|</span><span class="nb">int</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">vehTraceColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
    <span class="n">vehTraceWidth</span><span class="p">:</span> <span class="nb">float</span><span class="o">|</span><span class="nb">int</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">vehTraceShadowTime</span><span class="p">:</span> <span class="nb">float</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">vehSpdShowLabelFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">vehSpdShowArrowFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">vehSpdArrowLength</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">vehShowNoteFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">polygons</span><span class="p">:</span> <span class="nb">dict</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">polyFieldName</span> <span class="o">=</span> <span class="s1">&#39;poly&#39;</span><span class="p">,</span>    
    <span class="n">polyEdgeColor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
    <span class="n">polyEdgeWidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">polyFillColor</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span><span class="p">,</span>
    <span class="n">polyFillStyle</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;///&#39;</span><span class="p">,</span>
    <span class="n">polyOpacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">speed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">fps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">repeatFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">xyReverseFlag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">figSize</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> 
    <span class="n">boundingBox</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">aniSavePath</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">aniSaveDPI</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span>
    <span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Given nodes, vehicles, static polygons, and dynamic polygons, create animation</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>

<span class="sd">    nodes: dictionary, optional, default None</span>
<span class="sd">        A dictionary of nodes.</span>
<span class="sd">            &gt;&gt;&gt; nodes[nID] = {</span>
<span class="sd">            ...     &#39;loc&#39;: [x, y],</span>
<span class="sd">            ...     &#39;neighbor&#39;: poly, # A polygon indicating neighborhood</span>
<span class="sd">            ...     &#39;direction&#39;: direction, # Moving direction</span>
<span class="sd">            ...     &#39;speed&#39;: speed, # Moving speed</span>
<span class="sd">            ...     &#39;marker&#39;: &#39;r&#39;,    # Optional, default as &#39;o&#39;</span>
<span class="sd">            ...     &#39;markerSize&#39;: 2,  # Optional, default as None</span>
<span class="sd">            ...     &#39;color&#39;: &#39;red&#39;,   # Optional, default as &#39;Random&#39;</span>
<span class="sd">            ...     &#39;size&#39;: 3,        # Optional, default as 3</span>
<span class="sd">            ...     &#39;fontsize&#39;: 3,    # Optional, default as 3</span>
<span class="sd">            ... }</span>
<span class="sd">    vehicles: dictionary, optional, default None</span>
<span class="sd">        A dictionary of vehicle. </span>
<span class="sd">            &gt;&gt;&gt; vehicles[vID] = {</span>
<span class="sd">            ...     &#39;vehicle&#39;: vehicleName,</span>
<span class="sd">            ...     &#39;seq&#39;: [], # A sequence of visiting locations</span>
<span class="sd">            ...     &#39;timeStamp&#39;: [], # A sequence of time stamps when visiting each location</span>
<span class="sd">            ...     &#39;note&#39;: [], # Note to show during each leg of sequence</span>
<span class="sd">            ...     &#39;color&#39;: vehColor,</span>
<span class="sd">            ...     &#39;pathColor&#39;: pathColor,</span>
<span class="sd">            ...     &#39;traceColor&#39;: traceColor,</span>
<span class="sd">            ...     &#39;traceShadowTime&#39;: traceShadowTime</span>
<span class="sd">            ... }</span>
<span class="sd">    polygons: dictionary, optional, default None</span>
<span class="sd">        A dictionary indicating polygons that are dynamic/static in the animation</span>
<span class="sd">            &gt;&gt;&gt; polygons[pID] = {</span>
<span class="sd">            ...     &#39;anchor&#39;: [x, y], # The anchor of the polygon</span>
<span class="sd">            ...     &#39;poly&#39;: [pt1, pt2], # A sequence of extreme points, coordinates are relative to &#39;anchor&#39;</span>
<span class="sd">            ...     &#39;direction&#39;: direction, # Moving direction</span>
<span class="sd">            ...     &#39;speed&#39;: speed, # Moving speed,</span>
<span class="sd">            # ...     &#39;clockwise&#39;: None, # True if clockwise, False if counter-clockwise, None if not rotating</span>
<span class="sd">            # ...     &#39;rSpeed&#39;: radSpeed, # Rad speed,</span>
<span class="sd">            ...     &#39;timeRange&#39;: [ts, te], # Time range of the movement</span>
<span class="sd">            ...     &#39;edgeColor&#39;: color, # Edge color</span>
<span class="sd">            ...     &#39;fillColor&#39;: color, # Fill color</span>
<span class="sd">            ...     &#39;fillStyle&#39;: &quot;///&quot;, # Fill style</span>
<span class="sd">            ...     &#39;opacity&#39;: 0.5, # opacity</span>
<span class="sd">            ... }</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Check for required fields ===============================================</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nodes</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">vehicles</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">polygons</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MissingParameterError</span><span class="p">(</span><span class="s2">&quot;ERROR: Need to provide entities for animation.&quot;</span><span class="p">)</span>

    <span class="c1"># If no based matplotlib figure provided, define boundary =================</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">allX</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">allY</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nodes</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
                <span class="n">allX</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">locFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">allY</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">locFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">allX</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">locFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">allY</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">locFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
    <span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span> <span class="o">=</span> <span class="n">boundingBox</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">xMin</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">xMin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allX</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">xMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allX</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allX</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">yMin</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">yMin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allY</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">yMax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">yMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">allY</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">allY</span><span class="p">))</span>
    <span class="n">width</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">height</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span> <span class="o">&gt;</span> <span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="mi">5</span>
            <span class="n">height</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="p">((</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="p">((</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">))</span>
            <span class="n">height</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">((</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">))</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">figSize</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">((</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">))</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">figSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">=</span> <span class="n">figSize</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="n">width</span><span class="p">)</span> 
    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>

    <span class="c1"># Styling =================================================================</span>
    <span class="n">nodeStyle</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nodes</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">nID</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="n">nodeStyle</span><span class="p">[</span><span class="n">nID</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">nodeColor</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">nodeColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
                <span class="n">nodeStyle</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">nodeColor</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">nodeStyle</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodeColor</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;nodeColor&#39;</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">]):</span>
                <span class="n">nodeStyle</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeColor&#39;</span><span class="p">]</span>
            
            <span class="k">if</span> <span class="p">(</span><span class="n">nodeMarker</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">nodeStyle</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeMarker&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodeMarker</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;nodeMarker&#39;</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">]):</span>
                <span class="n">nodeStyle</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeMarker&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeMarker&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">nodeMarkerSize</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">nodeStyle</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeMarkerSize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodeMarkerSize</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;nodeMarkerSize&#39;</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">]):</span>
                <span class="n">nodeStyle</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeMarkerSize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeMarkerSize&#39;</span><span class="p">]</span>

    <span class="n">polyStyle</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">polygons</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">pID</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">:</span>
            <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">polyEdgeColor</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">polyEdgeColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">polyEdgeColor</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polyEdgeColor</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;edgeColor&#39;</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">]):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeColor&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">polyEdgeWidth</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeWidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polyEdgeWidth</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;edgeWidth&#39;</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">]):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeWidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeWidth&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">polyFillColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;fillColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">polyFillColor</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;fillColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polyFillColor</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;fillColor&#39;</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">]):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;fillColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;fillColor&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">polyFillStyle</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;fillStyle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polyFillStyle</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;fillStyle&#39;</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">]):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;fillStyle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;fillStyle&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">polyOpacity</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;opacity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polyOpacity</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;opacity&#39;</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">]):</span>
                <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;opacity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;opacity&#39;</span><span class="p">]</span>

    <span class="n">vehicleStyle</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">vehicles</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">vID</span> <span class="ow">in</span> <span class="n">vehicles</span><span class="p">:</span>
            <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">vehColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;vehColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">vehColor</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;vehColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehColor</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;color&#39;</span> <span class="ow">in</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">]):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;vehColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">vehMarker</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;vehMarker&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehMarker</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;marker&#39;</span> <span class="ow">in</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">]):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;vehMarker&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;marker&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">vehMarkerSize</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;vehMarkerSize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehMarkerSize</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;markerSize&#39;</span> <span class="ow">in</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">]):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;vehMarkerSize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;markerSize&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">vehPathColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;pathColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">vehPathColor</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;pathColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehPathColor</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;pathColor&#39;</span> <span class="ow">in</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">]):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;pathColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;pathColor&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">vehPathWidth</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;pathWidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehPathWidth</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;pathWidth&#39;</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">]):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;pathWidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;pathWidth&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">vehTraceColor</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colorRandom</span><span class="p">()</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">vehTraceColor</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehTraceColor</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;traceColor&#39;</span> <span class="ow">in</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">]):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceColor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceColor&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">vehTraceWidth</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceWidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehTraceWidth</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;traceWidth&#39;</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">]):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceWidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceWidth&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">vehTraceShadowTime</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceShadowTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehTraceShadowTime</span>
            <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;traceShadowTime&#39;</span> <span class="ow">in</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">]):</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceShadowTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceShadowTime&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceShadowTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">)</span>

        <span class="c1"># Clock</span>
        <span class="n">clock</span> <span class="o">=</span> <span class="n">timeRange</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">speed</span> <span class="o">/</span> <span class="p">(</span><span class="n">fps</span> <span class="o">*</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Clock: </span><span class="si">%s</span><span class="s2">[s]&quot;</span> <span class="o">%</span> <span class="nb">round</span><span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

        <span class="c1"># Plot static/dynamic polygons</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">polygons</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="c1"># Plot each polygon -----------------------------------------------</span>
            <span class="k">for</span> <span class="n">pID</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">:</span>
                <span class="c1"># 判定此时刻是否需要绘制poly</span>
                <span class="n">plotPolyFlag</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">timeWindowFieldName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">]</span> <span class="ow">or</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="n">timeWindowFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">clock</span> <span class="o">&lt;=</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="n">timeWindowFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">]):</span>
                    <span class="n">plotPolyFlag</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="c1"># 每个Poly的坐标轮廓</span>
                <span class="n">pX</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">pY</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">plotPolyFlag</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="n">polyFieldName</span><span class="p">]:</span>
                        <span class="n">pt</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;direction&#39;</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">]</span> <span class="ow">and</span> <span class="s1">&#39;speed&#39;</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">]):</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">clock</span> <span class="o">&lt;</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="n">timeWindowFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
                                <span class="n">pt</span> <span class="o">=</span> <span class="n">p</span>
                            <span class="k">elif</span> <span class="p">(</span><span class="n">clock</span> <span class="o">&lt;</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="n">timeWindowFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">]):</span>
                                <span class="n">pt</span> <span class="o">=</span> <span class="n">ptInDistXY</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">],</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;speed&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">clock</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">pt</span> <span class="o">=</span> <span class="n">ptInDistXY</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">],</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;speed&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;timeRange&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">polygons</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;timeRange&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">pt</span> <span class="o">=</span> <span class="n">p</span>

                        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
                            <span class="n">pX</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="n">pY</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">pX</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                            <span class="n">pY</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

                <span class="c1"># Plot polygons with styling</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">plotPolyFlag</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;fillColor&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">]):</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pX</span><span class="p">,</span> <span class="n">pY</span><span class="p">,</span> 
                            <span class="n">color</span><span class="o">=</span><span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeColor&#39;</span><span class="p">],</span> 
                            <span class="n">linewidth</span><span class="o">=</span><span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeWidth&#39;</span><span class="p">])</span>
                    <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;fillStyle&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">]):</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">pX</span><span class="p">,</span> <span class="n">pY</span><span class="p">,</span> 
                            <span class="n">facecolor</span><span class="o">=</span><span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;fillColor&#39;</span><span class="p">],</span> 
                            <span class="n">edgecolor</span><span class="o">=</span><span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeColor&#39;</span><span class="p">],</span> 
                            <span class="n">linewidth</span><span class="o">=</span><span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeWidth&#39;</span><span class="p">],</span> 
                            <span class="n">alpha</span><span class="o">=</span><span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;opacity&#39;</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">pX</span><span class="p">,</span> <span class="n">pY</span><span class="p">,</span> 
                            <span class="n">facecolor</span><span class="o">=</span><span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;fillColor&#39;</span><span class="p">],</span> 
                            <span class="n">edgecolor</span><span class="o">=</span><span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeColor&#39;</span><span class="p">],</span> 
                            <span class="n">hatch</span><span class="o">=</span><span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;fillStyle&#39;</span><span class="p">],</span> 
                            <span class="n">linewidth</span><span class="o">=</span><span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;edgeWidth&#39;</span><span class="p">],</span> 
                            <span class="n">alpha</span><span class="o">=</span><span class="n">polyStyle</span><span class="p">[</span><span class="n">pID</span><span class="p">][</span><span class="s1">&#39;opacity&#39;</span><span class="p">])</span>

        <span class="c1"># Plot nodes</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">nodes</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="c1"># Plot the location of nodes --------------------------------------</span>
            <span class="k">for</span> <span class="n">nID</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
                <span class="n">plotNodeFlag</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">timeWindowFieldName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">]</span> <span class="ow">or</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="n">timeWindowFieldName</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">clock</span> <span class="o">&lt;=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="n">timeWindowFieldName</span><span class="p">][</span><span class="mi">1</span><span class="p">]):</span>
                    <span class="n">plotNodeFlag</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>       
                <span class="n">curLoc</span> <span class="o">=</span> <span class="kc">None</span>         
                <span class="k">if</span> <span class="p">(</span><span class="n">plotNodeFlag</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">timedSeqFieldName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">]):</span>
                        <span class="n">curLoc</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="n">locFieldName</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">curSnap</span> <span class="o">=</span> <span class="n">snapInTimedSeq</span><span class="p">(</span>
                            <span class="n">timedSeq</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="n">timedSeqFieldName</span><span class="p">],</span>
                            <span class="n">t</span> <span class="o">=</span> <span class="n">clock</span><span class="p">)</span>
                        <span class="n">curLoc</span> <span class="o">=</span> <span class="n">curSnap</span><span class="p">[</span><span class="s1">&#39;loc&#39;</span><span class="p">]</span>

                <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="n">curLoc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">curLoc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="n">curLoc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">curLoc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="c1"># Styling of each node</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">plotNodeFlag</span><span class="p">):</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> 
                        <span class="n">color</span> <span class="o">=</span> <span class="n">nodeStyle</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeColor&#39;</span><span class="p">],</span> 
                        <span class="n">marker</span> <span class="o">=</span> <span class="n">nodeStyle</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeMarker&#39;</span><span class="p">],</span> 
                        <span class="n">markersize</span> <span class="o">=</span> <span class="n">nodeStyle</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;nodeMarkerSize&#39;</span><span class="p">])</span>
                    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;label&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">]):</span>
                        <span class="n">lbl</span> <span class="o">=</span> <span class="n">nID</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">lbl</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">nID</span><span class="p">][</span><span class="s1">&#39;label&#39;</span><span class="p">]</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">lbl</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

        <span class="c1"># Plot vehicle</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">vehicles</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="c1"># Plot each vehicle -----------------------------------------------</span>
            <span class="k">for</span> <span class="n">vID</span> <span class="ow">in</span> <span class="n">vehicles</span><span class="p">:</span>
                <span class="c1"># Plot path</span>
                <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;pathColor&#39;</span> <span class="ow">in</span> <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">]):</span>
                    <span class="n">pathX</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">pathY</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
                        <span class="n">pathX</span> <span class="o">=</span> <span class="p">[</span><span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="n">vehTimedSeqFieldName</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="n">vehTimedSeqFieldName</span><span class="p">]))]</span>
                        <span class="n">pathY</span> <span class="o">=</span> <span class="p">[</span><span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="n">vehTimedSeqFieldName</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="n">vehTimedSeqFieldName</span><span class="p">]))]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pathX</span> <span class="o">=</span> <span class="p">[</span><span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="n">vehTimedSeqFieldName</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="n">vehTimedSeqFieldName</span><span class="p">]))]</span>
                        <span class="n">pathY</span> <span class="o">=</span> <span class="p">[</span><span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="n">vehTimedSeqFieldName</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="n">vehTimedSeqFieldName</span><span class="p">]))]</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pathX</span><span class="p">,</span> <span class="n">pathY</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;pathColor&#39;</span><span class="p">],</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

                <span class="c1"># Plot trace</span>
                <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;traceColor&#39;</span> <span class="ow">in</span> <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">]):</span>
                    <span class="n">ts</span> <span class="o">=</span> <span class="n">timeRange</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">te</span> <span class="o">=</span> <span class="n">clock</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceShadowTime&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                        <span class="n">ts</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">te</span> <span class="o">-</span> <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceShadowTime&#39;</span><span class="p">],</span> <span class="n">timeRange</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

                    <span class="k">if</span> <span class="p">(</span><span class="n">ts</span> <span class="o">&lt;</span> <span class="n">te</span><span class="p">):</span>
                        <span class="n">trace</span> <span class="o">=</span> <span class="n">traceInTimedSeq</span><span class="p">(</span>
                            <span class="n">timedSeq</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="n">vehTimedSeqFieldName</span><span class="p">],</span>
                            <span class="n">ts</span> <span class="o">=</span> <span class="n">ts</span><span class="p">,</span>
                            <span class="n">te</span> <span class="o">=</span> <span class="n">te</span><span class="p">)</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s1">&#39;traceColor&#39;</span> <span class="ow">in</span> <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">]):</span>
                            <span class="n">traceX</span> <span class="o">=</span> <span class="p">[]</span>
                            <span class="n">traceY</span> <span class="o">=</span> <span class="p">[]</span>
                            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">xyReverseFlag</span><span class="p">):</span>
                                <span class="n">traceX</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">trace</span><span class="p">]</span>
                                <span class="n">traceY</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">trace</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">traceX</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">trace</span><span class="p">]</span>
                                <span class="n">traceY</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">trace</span><span class="p">]</span>
                            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">traceX</span><span class="p">,</span> <span class="n">traceY</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;traceColor&#39;</span><span class="p">],</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

                <span class="c1"># Plot vehicle</span>
                <span class="n">curSnap</span> <span class="o">=</span> <span class="n">snapInTimedSeq</span><span class="p">(</span>
                    <span class="n">timedSeq</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="n">vehTimedSeqFieldName</span><span class="p">],</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">clock</span><span class="p">)</span>
                <span class="n">curLoc</span> <span class="o">=</span> <span class="n">curSnap</span><span class="p">[</span><span class="s1">&#39;loc&#39;</span><span class="p">]</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">curLoc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">curLoc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> 
                    <span class="n">color</span> <span class="o">=</span> <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;vehColor&#39;</span><span class="p">],</span> 
                    <span class="n">marker</span> <span class="o">=</span> <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;vehMarker&#39;</span><span class="p">],</span> 
                    <span class="n">markersize</span> <span class="o">=</span> <span class="n">vehicleStyle</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;vehMarkerSize&#39;</span><span class="p">])</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">vehLabelFieldName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">]):</span>
                    <span class="n">lbl</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">vID</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">lbl</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="n">vehLabelFieldName</span><span class="p">]</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">vehSpdShowLabelFlag</span><span class="p">):</span>
                    <span class="n">curSpd</span> <span class="o">=</span> <span class="n">curSnap</span><span class="p">[</span><span class="s1">&#39;speed&#39;</span><span class="p">]</span>
                    <span class="n">lbl</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">[m/s]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">curSpd</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
                
                <span class="k">if</span> <span class="p">(</span><span class="n">vehShowNoteFlag</span> <span class="ow">and</span> <span class="s1">&#39;note&#39;</span> <span class="ow">in</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">]):</span>
                    <span class="n">note</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">clock</span> <span class="o">&lt;=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;timedSeq&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]):</span>
                        <span class="n">note</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;note&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="p">(</span><span class="n">clock</span> <span class="o">&gt;=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;timedSeq&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]):</span>
                        <span class="n">note</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;note&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;timedSeq&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;timedSeq&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">clock</span> <span class="o">&lt;</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;timedSeq&#39;</span><span class="p">][</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]):</span>
                                <span class="n">note</span> <span class="o">=</span> <span class="n">vehicles</span><span class="p">[</span><span class="n">vID</span><span class="p">][</span><span class="s1">&#39;note&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
                                <span class="k">break</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">lbl</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">note</span><span class="p">,</span> <span class="p">(</span><span class="n">curLoc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">curLoc</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">lbl</span><span class="p">,</span> <span class="p">(</span><span class="n">curLoc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">curLoc</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

    <span class="n">ani</span> <span class="o">=</span> <span class="n">FuncAnimation</span><span class="p">(</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> 
        <span class="n">frames</span><span class="o">=</span><span class="nb">int</span><span class="p">((</span><span class="n">timeRange</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">speed</span> <span class="o">*</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">-</span> <span class="n">timeRange</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">speed</span> <span class="o">*</span> <span class="mf">1.0</span><span class="p">))</span> <span class="o">*</span> <span class="n">fps</span><span class="p">),</span> 
        <span class="n">interval</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">fps</span><span class="p">),</span> 
        <span class="n">repeat</span> <span class="o">=</span> <span class="n">repeatFlag</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">aniSavePath</span><span class="p">):</span>
        <span class="n">ani</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.gif&quot;</span> <span class="o">%</span> <span class="n">aniSavePath</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">aniSaveDPI</span><span class="p">,</span> <span class="n">writer</span><span class="o">=</span><span class="n">PillowWriter</span><span class="p">(</span><span class="n">fps</span><span class="o">=</span><span class="n">fps</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">ani</span></div>

</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">vrpSolver 0.0.56 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">vrpSolver.plot</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, Lan Peng.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    </div>
  </body>
</html>